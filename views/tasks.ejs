<%- include('header'); -%>
<body class="h-100">
  <div class="bg-primary">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light m-0">
        <span class="navbar-brand mb-0 h1">Onboarding</span>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active"><a class="nav-link" href="/">Tasks</a></li>
            <% if (role == 'manager') { %>
              <li class="nav-item"><a class="nav-link" href="/manage">Manage</a></li>
            <% } %>
          </ul>
          <span class="mb-0 my-sm-0">
            <span><% name %></span>
            <a class="btn btn-outline-dark ml-2" href="/logout" role="button">Logout</a>
          </span>
        </div>
      </nav>
    </div>
  </div>
  <div class="container">
    <div class="row p-3">
      <div class="col">
        <div class="card mb-3">
          <h5 class="card-header px-3">Assigned Tasks</h5>
          <% if (!assigned || assigned.length === 0) { %>
            <p class="px-3 pt-3">No assigned tasks</p>
          <% } else { %>
            <div class="card-body">
              <table class="table shadow">
                <tbody>
                  <% for (const task of assigned) {%>
                    <tr class="table-secondary">
                      <th scope="row"><%= task.identifier() %></th>
                      <td><%= task.assignee %></td>
                      <td><a class="btn btn-sm btn-primary" href="/task/<%= task.task_id %>">View</a></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          <% } %>
        </div>
        <div class="card mb-3">
          <h5 class="card-header px-3">Unassigned Tasks</h5>
          <% if (!unassigned || unassigned.length === 0) { %>
            <p class="px-3 pt-3">No unassigned tasks</p>
          <% } else { %>
            <div class="card-body">
              <table class="table shadow">
                <tbody>
                  <% for (const task of unassigned) {%>
                    <tr class="table-secondary">
                      <th scope="row"><%= task.identifier() %></th>
                      <td><a class="btn btn-sm btn-primary" href="/task/<%= task.task_id %>">View</a></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          <% } %>
        </div>
        <div class="card">
          <h5 class="card-header px-3">Completed Tasks</h5>
          <% if (!completed || completed.length === 0) { %>
            <p class="px-3 pt-3">No completed tasks</p>
          <% } else { %>
            <div class="card-body">
              <table class="table shadow">
                <tbody>
                  <% for (const task of completed) {%>
                    <tr class="table-secondary">
                      <th scope="row"><%= task.identifier() %></th>
                      <td><a class="btn btn-sm btn-primary" href="/task/<%= task.task_id %>">View</a></td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          <% } %>
        </div>
      </div>
    </div>  
  </div>
</body>
</html>